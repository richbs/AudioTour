<!DOCTYPE html>
<html manifest="cache.manifest">
<head>
<meta charset="UTF-8">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<title>Touch Trail Audio Tour</title>
<link rel="stylesheet" href="jquery.mobile.css" />
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.mobile.js"></script>
</head>
<body>
<div data-role="page" data-theme="a" id="start">
<div data-role="header" id="hd-audio-tour">
<h1>Audio Tour</h1>
</div>
<div data-role="content">
<p><a href="#instructions" data-role="button">Instructions</a> <a
    href="#menu" data-role="button">Menu</a></p>
</div>
</div>
<div data-role="page" data-theme="a" id="instructions"><div data-role="header">
<h1>Instructions</h1>
</div>
<div data-role="content">
<p><img src="images/va/instructions.jpg" /></p>
<p><audio src="audio/instructions.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a class="ui-block-b" data-role="button">Play</a>
<a href="#object1" class="ui-block-c">Next</a></div>
</div>
<div data-role="page" data-theme="a" id="menu">
<div data-role="header" data-position="fixed">
<h1>Touch Trail Menu</h1>
</div>
<div data-role="content">
<ul data-role="listview" data-theme="a">
    <li>
    <h2><a href="#introduction">Introduction</a></h2>
    </li>
    <li>
    <h2><a href="#object1">Object 1</a></h2>
    <p>Head of a Bodhisattva<span class="ui-li-count">44</span></p>
    </li>
    <li>
    <h2><a href="#object2">Object 2</a></h2>
    <p>Head of a Hat<span class="ui-li-count">124</span></p>
    </li>
    <li>
    <h2><a href="#object3">Object 3</a></h2>
    <p>Head of a Corporation<span class="ui-li-count">56</span></p>
    </li>
    <li>
    <h2><a href="#object4">Object 4</a></h2>
    <p>Head of a Something<span class="ui-li-count">44</span></p>
    </li>
    <li>
    <h2><a href="#object5">Object 5</a></h2>
    <p>Head of a Fifth<span class="ui-li-count">55</span></p>
    </li>
    <li>
    <h2><a href="#object6">Object 6</a></h2>
    <p>Head of a Sixth<span class="ui-li-count">66</span></p>
    </li>
    <li>
    <h2><a href="#object7">Object 7</a></h2>
    <p>Head of a Seventh<span class="ui-li-count">77</span></p>
    </li>
    <li>
    <h2><a href="#object8">Object 8</a></h2>
    <p>Head of an Eighth<span class="ui-li-count">88</span></p>
    </li>
    <li>
    <h2><a href="#object9">Object 9</a></h2>
    <p>Head of a Ninth<span class="ui-li-count">99</span></p>
    </li>
    <li>
    <h2><a href="#object10">Object 10</a></h2>
    <p>Head of a Tenth<span class="ui-li-count">10g</span></p>
    </li>
</ul>
</div>
<div data-role="footer" data-position="fixed" class="ui-grid-a"><a
    class="ui-block-a">Menu</a> <a href="#introduction" class="ui-block-b">Next</a></div>
</div>
<div data-role="page" data-theme="a" id="introduction">
<div data-role="header">
<h1>Introduction</h1>
</div>
<div data-role="content">
<p><img src="images/va/intro.jpg" /></p>
<p><audio src="audio/intro.mp3" id="audiointro"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object1" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object1">
<div data-role="header">
<h1>Head of a Bodhisattva<span class="ui-li-count">44</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object1.jpg" /></p>
<p><audio src="audio/audio1.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object2" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object1-more"></div>
<div data-role="page" data-theme="a" id="object2">
<div data-role="header">
<h1>Object 2<span class="ui-li-count">44</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object2.jpg" /></p>
<p><audio src="audio/audio2.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object3" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object2-more"></div>
<div data-role="page" data-theme="a" id="object3">
<div data-role="header">
<h1>Object 3<span class="ui-li-count">44</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object3.jpg" /></p>
<p><audio src="audio/audio3.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object4" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object3-more"></div>
<div data-role="page" data-theme="a" id="object4">
<div data-role="header">
<h1>Object 4<span class="ui-li-count">44</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object4.jpg" /></p>
<p><audio src="audio/audio4.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object5" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object4-more"></div>
<div data-role="page" data-theme="a" id="object5">
<div data-role="header">
<h1>Object 5<span class="ui-li-count">47</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object5.jpg" /></p>
<p><audio src="audio/audio5.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object6" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object5-more"></div>
<div data-role="page" data-theme="a" id="object6">
<div data-role="header">
<h1>Object 6<span class="ui-li-count">3457</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object6.jpg" /></p>
<p><audio src="audio/audio6.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object7" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object6-more"></div>
<div data-role="page" data-theme="a" id="object7">
<div data-role="header">
<h1>Object 7<span class="ui-li-count">777</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object7.jpg" /></p>
<p><audio src="audio/audio7.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object8" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object7-more"></div>
<div data-role="page" data-theme="a" id="object8">
<div data-role="header">
<h1>Object 8<span class="ui-li-count">88</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object8.jpg" /></p>
<p><audio src="audio/audio8.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object9" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object8-more"></div>
<div data-role="page" data-theme="a" id="object9">
<div data-role="header">
<h1>Object 9<span class="ui-li-count">47</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object9.jpg" /></p>
<p><audio src="audio/audio9.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
<a href="#object10" class="ui-block-c">Next</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object9-more"></div>
<div data-role="page" data-theme="a" id="object10">
<div data-role="header">
<h1>Object 10<span class="ui-li-count">10</span></h1>
</div>
<div data-role="content">
<p><img src="images/va/object10.jpg" /></p>
<p><audio src="audio/audio10.mp3"></audio></p>
</div>
<div data-role="footer" class="ui-grid-b">
<a href="#menu" class="ui-block-a" data-direction="reverse">Menu</a>
<a href="#" class="play-control ui-block-b" data-role="button">Play</a>
</div>
</div>
<div data-role="page" data-theme="a" id="object10-more"></div>
<script type="text/javascript">

function get_audio_element(playbutton){

    var parentpage = $(playbutton).parents('div[data-role="page"]');
    var audiotag = $(parentpage).find('audio')[0];
	return audiotag;
}

$(document).ready(function(){

	$("a.play-control").click(function(e){
		
		var playbutton;
		if ( e.target.tagName == 'SPAN' ) {
			 playbutton = $(e.target).parent('A')[0];
			
		} else {
			playbutton = e.target;	
		}
		
		var audiotag = get_audio_element(playbutton);
		if ($(playbutton).hasClass('now-playing')) {
            buttontext_span = $(playbutton).find('span.ui-btn-text');
			$(buttontext_span).text("Play");
			$(playbutton).removeClass('now-playing ui-btn-down-a')
			$(playbutton).addClass('ui-btn-up-a');
			// Get parent
			audiotag.pause();

			
		} else {
			/*
	          Stop all playing audios and play this one		
   			//console.log($('a.now-playing'));
			Use a function
			*/
			buttontext_span = $(playbutton).find('span.ui-btn-text')[0];
			$(buttontext_span).text("Pause");
			$(playbutton).removeClass('ui-btn-up-a')
			$(playbutton).addClass('ui-btn-down-a now-playing');
			// Get parent
			audiotag.play();
			
		}		
	})


	
})
</script>
</body>
</html>